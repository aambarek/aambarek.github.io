{
  "hash": "b52f70b44a64ef29dc6c6b744db0cca8",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"GiniDecompLY\"\nauthor: \"Abdessamad Ait Mbarek\"\nformat:\n  html:\n    toc: true\n  pdf:\n    author: Abdessamad Ait Mbarek\ndate: \"2024-01-17\"\ndate-format: \"MMM, YYYY\"\ncategories: [programming, economics]\ntitle-block-banner: \"#1f65b7\"\ntitle-block-banner-color: \"#e3e9f0\"\nimage: CRANlogo.png\nformat-links: [pdf]\n---\n\n\n`GiniDecompLY` R package üì¶ provides a set of functions to estimate the effect of each income source on income inequalities based on the decomposition of Lerman and Yitzhaki (1985) <doi:10.2307/1928447>. This R package offers tidy output, presenting results in tidy tibbles, making it easy for users to explore and utilize the results for further analysis and visualization.\n\n\n::: {.cell}\n\n:::\n\n\nYou can access the package page on [CRAN](https://cran.r-project.org/web/packages/GiniDecompLY/index.html) and you can install it using :\n\n\n::: {.cell}\n\n```{.r .cell-code}\ninstall.packages(\"GiniDecompLY\")\n```\n:::\n\n::: {.cell}\n\n:::\n\n\nThe functions include :\n\n-   Calculating the Gini correlation index between two distributions.\n-   Estimation of the contribution of each income source on the overall income inequality.\n-   Computation of elasticity of Gini index associated with change in income sources.\n-   Growth-redistribution decomposition of the effects of income sources on social welfare function as defined by Amartya Sen (1970)\n\nA sample data on income sources has been provided in the package :\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndplyr::glimpse(sample_income_data)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 200\nColumns: 6\n$ region              <chr> \"Rural\", \"Urban\", \"Urban\", \"Rural\", \"Urban\", \"Urban\", \"Rural\", \"Rural\", \"Urban\", \"Urban\", \"Urban\", \"Urban\", \"Rural\", \"Ur‚Ä¶\n$ sample_wgt          <dbl> 991, 1328, 493, 963, 1065, 934, 1043, 259, 400, 649, 514, 758, 715, 1119, 1052, 1927, 418, 538, 987, 147, 1788, 1019, 13‚Ä¶\n$ wage                <dbl> 0, 538, 0, 0, 0, 0, 967, 0, 121, 1985, 0, 1338, 500, 441, 0, 273, 468, 563, 513, 0, 253, 887, 0, 0, 0, 0, 1788, 1941, 0,‚Ä¶\n$ self_employment_rev <dbl> 0, 0, 0, 0, 2191, 0, 298, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 438, 1332, 701, 0, 0, 419, 1402, 0, 0, 0, 0, 0‚Ä¶\n$ farming_rev         <dbl> 0, 0, 414, 268, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 646, 504, 0, 356, 0, 0, 155, 0, 0, 349, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1‚Ä¶\n$ other_rev           <dbl> 338, 586, 4026, 377, 23, 779, 200, 1554, 450, 0, 2638, 0, 294, 297, 239, 266, 340, 191, 228, 1212, 225, 364, 1800, 5438,‚Ä¶\n```\n\n\n:::\n:::\n\n\nThe sample data contains 200 observations representing households and 6 columns :\n\n-   `region` column categorizes households based on whether they reside in urban or rural areas.\n-   `sample_wgt` column contains the sampling weights assigned to each observation.\n-   `wage`, `self_employment_rev`, `farming_rev`, and `other_rev` represent different sources of income for the household. Specifically, `wage` refers to wages and salaries earned, `self_employment_rev` denotes revenue from independent activities, `farming_rev` signifies income from farming, and `other_rev` encompasses income from other sources.\n\n## Gini Correlation Index\n\nGini correlation was first introduced in Schechtman and Yitzhaki (1987). It is a non-symmetric measure and can take the following two forms, depending on which variable is given in its actual values and which one is ranked:\n\nIf $X$ and $Y$ are random variables from continuous distribution functions $F_X$ and $G_Y$ respectively\n\n$$\n\\Gamma(X,Y) = \\frac{Cov(X,G_Y(Y))}{Cov(X,F_X(X))}\n$$\n\nand similarly, $$\n\\Gamma(Y,X) = \\frac{Cov(Y,F_X(X))}{Cov(Y,G_Y(Y))}\n$$ The range of the gini correlation coefficient is $[‚àí1, 1]$\n\n`gini_corr` function takes as first argument the variable in its actual values, and as second argument the variable of the distribution with the rank information. An optional argument for sampling weights is also available.\n\nIf we want to calculate the gini correlation coefficient of salaries distribution ranked with the total income distribution, then we can call the function as follow:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Calculate the gini correlation between the salary and total income distributions\n\nSalary_distribution = sample_income_data$wage\nTotal_income_distribution = rowSums(sample_income_data[3:6])\n\ngini_corr(Salary_distribution, Total_income_distribution)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0.6307609\n```\n\n\n:::\n:::\n\n\n## Gini decomposition by income sources\n\nThe Lerman and Yitzhaki decomposition method aims to understand the contribution of different income sources to overall income inequality.\n\n\n\n\n\nSuppose the total income of households comes from 4 income sources as described in `sample_income_data` dataset. The decomposition of Lerman and Yitzhaki provide estimation of the contribution of each income source to the income inequality as measured by Gini coefficient.\n\n$$\nGini(income) = 0.421\n$$\n\nThe final output of the decomposition is represented by the `Absolute Contibution` for each income source which sum up to the overall $Gini(income)$, and the `Relative Contribution` which sum up to\n\nThe steps of estimation include :\n\n1- Calculation of the `Share` of each income source to the total income;\n\n2- Calculation of `Gini` coefficients for each income source;\n\n3- Calculation of `Gini_corr` (gini correlation coefficient) between the distribution each income source and the total income.\n\n`Absolute Contribution` is calculated as follow:\n\n`Absolute Contribution` = `Share` \\* `Gini` \\* `Gini_corr`\n\nand then\n\n`Relative Contribution` = `Absolute Contribution` / `Gini(income)`\n\n`gini_decomp_source` provide a tibble containing all the components described above. It takes as a first argument the `.data` containing the income sources variables. And then we pass the columns names (or positions), separated by commas, indicating income sources.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsample_income_data |> \n  gini_decomp_source(wage, self_employment_rev, farming_rev, other_rev)\n```\n:::\n\n\nThe function provides two optional arguments:\n\n\\-`.wgt` for sampling weights; - and `.by` for results disaggregation, in that case the output will be a grouped tibble.\n\nWe can also pass the income sources variables by their positions in the data frame:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngini_decomp_source(sample_income_data, 3:6, .by = region, .wgt = sample_wgt)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 8 √ó 7\n# Groups:   region [2]\n  region income_source         Share  Gini Gini_corr Absolute_Contribution Relative_Contribution\n  <chr>  <chr>                 <dbl> <dbl>     <dbl>                 <dbl>                 <dbl>\n1 Rural  farming_rev         0.412   0.815     0.854               0.287                 0.654  \n2 Rural  other_rev           0.301   0.402     0.395               0.0478                0.109  \n3 Rural  self_employment_rev 0.0674  0.907     0.471               0.0288                0.0655 \n4 Rural  wage                0.219   0.706     0.488               0.0755                0.172  \n5 Urban  farming_rev         0.00189 0.989     0.737               0.00138               0.00354\n6 Urban  other_rev           0.373   0.618     0.634               0.146                 0.374  \n7 Urban  self_employment_rev 0.165   0.827     0.327               0.0446                0.114  \n8 Urban  wage                0.460   0.648     0.665               0.198                 0.508  \n```\n\n\n:::\n:::\n\n\n## Gini income elasticity\n\nThe decomposition method described above can be represented in the following equation:\n\n$$\nGini(Y) = \\sum_k {S_k \\Gamma(Y_k,Y) Gini(Y_k)}\n$$\n\nWhere $Y_k$ and $S_k$ are the distribution and the `Share` of income source $k$, respectively. And $Y$ denotes the distribution of the total income.\n\nThus, `Absolute Contribution` for the $k^{th}$ income source is the product $S_k \\Gamma(Y_k,Y) Gini(Y_k)$\n\nStark and al. (1986) showed that this decomposition equation offers a simple method to assess the marginal effect on total income inequality following a marginal percentage variation in income from a given source, equal for all households. Thus, the impact of an increase in income from source $k$, for all households, in such a way that $Y_k$ is multiplied by $(1 + e_k)$, where $e_k$ is sufficiently small can be represented as follow :\n\n$$\n\\frac{\\partial Gini(Y)}{\\partial e_k} = S_k (\\Gamma(Y_k,Y) Gini(Y_k)- Gini(Y))\n$$\n\nThis expression show a measure for the marginal contribution of source $k$ to the overall inequality. It can be expressed differently to reveal the relative marginal contribution of inequality due to a marginal variation in the income from source $k$:\n\n$$\n\\frac{\\partial Gini(Y) / \\partial e_k}{Gini(Y)} = S_k (\\frac{\\Gamma(Y_k,Y) Gini(Y_k)}{Gini(Y)}- 1) = S_k(\\eta_k-1)\n$$\n\nWhere\n\n$$\n\\eta_k = \\frac{\\Gamma(Y_k,Y) Gini(Y_k)}{Gini(Y)}\n$$ $\\eta_k$ will denote the elasticity of Gini index associated with a percentage change in the mean income (for each income source)\n\nThis definition clearly demonstrates that the marginal impact of a source of income depends on its income elasticity of the Gini index. Thus, a percentage increase in the income from a source with a lower $\\eta_k$ (higher) than 1, will decrease (increase), the overall income inequality. When the $\\eta_k$ is close to 1, it means that the variation in this source does not affect overall inequality.\n\n`gini_income_elasticity` function calculate the `Elsaticity` along with the `Marginal_Impact` of a change in the mean of each income source on the overall Gini index.\n\nThe function has the same set of arguments as the previous function\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsample_income_data |> \n  gini_income_elasticity(wage, self_employment_rev, farming_rev, other_rev,\n                         .by = region,\n                         .wgt = sample_wgt)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 8 √ó 7\n# Groups:   region [2]\n  region income_source         Share  Gini Gini_corr Elasticity Marginal_Impact\n  <chr>  <chr>                 <dbl> <dbl>     <dbl>      <dbl>           <dbl>\n1 Rural  farming_rev         0.412   0.815     0.854      1.59         0.241   \n2 Rural  other_rev           0.301   0.402     0.395      0.362       -0.192   \n3 Rural  self_employment_rev 0.0674  0.907     0.471      0.973       -0.00182 \n4 Rural  wage                0.219   0.706     0.488      0.784       -0.0474  \n5 Urban  farming_rev         0.00189 0.989     0.737      1.87         0.00164 \n6 Urban  other_rev           0.373   0.618     0.634      1.00         0.000976\n7 Urban  self_employment_rev 0.165   0.827     0.327      0.693       -0.0506  \n8 Urban  wage                0.460   0.648     0.665      1.10         0.0480  \n```\n\n\n:::\n:::\n\n\n## Growth-redistribution impacts on social welfare function\n\nIn terms of social welfare, if individuals or households assess their level of well-being, on one hand, in absolute terms (that is, the income they have), and, on the other hand, in relative terms (how much they have compared to others), the level of social welfare can be represented as a function combining the level and inequality of well-being (Wodon and Yitzhaki, 2002; Essama-Nssah, 2000 & Sen, 1997). In other words, such a function combines both the social preference for more income and that for more equality. It is an increasing function of the mean and decreasing function of inequality (Essama-Nssah, 2000).\n\nSen (1997) showed, under the assumption that individual well-being is approximated by individual income and that the well-being of any pair of individuals equals that of the poorest, then the following expression can be considered as a function of social welfare underlying the Gini coefficient.\n\n$$\nSW = \\bar{Y} (1-G))\n$$ Where $\\bar{Y}$ denotes average income and $G$ the Gini index.\n\nUsing the decomposition of $G$, the impact of a variation in an income source on the Social Welfare function is estimated according to the following formulation:\n\n$$\n\\frac{\\Delta SW}{SW} \\mid _{Y_k} = \\frac{S_k}{1-Gini(Y)} -  \\frac{S_k\\Gamma(Y_k,Y)Gini(Y_k)}{1-Gini(Y)}\n$$\n\n`social_welfare_impact` function provides a Growth-redistribution decomposition of the impact of a variation in each income source on the Social Welfare function.\n\nThe output of the function is three columns (added to the decomposition components described before)\n\n-   `Total_Variation` = $\\frac{\\Delta SW}{SW} \\mid _{Y_k}$;\n\n-   `Growth_Effect` = $\\frac{S_k}{1-Gini(Y)}$;\n\n-   `Redistribution_Effect` = $- \\frac{S_k\\Gamma(Y_k,Y)Gini(Y_k)}{1-Gini(Y)}$\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsample_income_data |> \n   social_welfare_impact(wage, self_employment_rev, farming_rev, other_rev,\n   .wgt = sample_wgt)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 4 √ó 7\n  income_source       Share  Gini Gini_corr Growth_Effect Redistribution_Effect Total_Variation\n  <chr>               <dbl> <dbl>     <dbl>         <dbl>                 <dbl>           <dbl>\n1 farming_rev         0.125 0.926     0.620         0.215               -0.123           0.0917\n2 other_rev           0.352 0.574     0.600         0.607               -0.209           0.398 \n3 self_employment_rev 0.136 0.864     0.424         0.234               -0.0858          0.148 \n4 wage                0.388 0.697     0.659         0.669               -0.308           0.362 \n```\n\n\n:::\n:::\n\n\n## References\n\nEssama-Nssah B. (2000), *In√©galit√©, pauvret√© et bien-√™tre social, fondements analytiques et normatifs*, De Boeck Universit√©, Bruxelles\n\nHandcock, M. (2016), *Relative Distribution Methods in the Social Sciences*, Springer-Verlag, Inc., New York, 1999 ISBN 0387987789\n\nLerman, R. I., & Yitzhaki, S. (1985). *Income Inequality Effects by Income Source: A New Approach and Applications to the United States*. The Review of Economics and Statistics, 67(1), 151--156. https://doi.org/10.2307/1928447\n\nRawls J. (1971), *A Theory of Justice*, The Belknap Press of Harvard Univers\n\nSchechtman, E., and Yitzhaki, S. (1987). *A Measure of Association Based on Gini's Mean Difference. Communications in Statistics: Theory and Methods* A16:207--31.\n\nSchechtman, E., and Yitzhaki, S. (1999) *On the proper bounds of the Gini correlation*, Economics Letters,Volume 63, Issue 2, p. 133-138, ISSN 0165-1765\n\nSen A. (1970) *Collective Choice and Social Welfare*, Holden-Day, ISBN:978-0-444-85127-7\n\nSoudi, Khalid. (2012). *Les in√©galit√©s √©conomique et sociale au Maroc √âl√©ments de politiques pour le bien-√™tre et le ciblage de la pauvret√©*.\n\n\nStark, O., J. Taylor, and S. Yitzhaki. (1986). *Remittances and Inequality*. Economic Journal 96(383):722--40.\n\nWodon, Quentin and Yitzhaki, Shlomo (2002): *Inequality and Social Welfare*. Published in: A Source book for Poverty Reduction Strategies , Vol. 1, (April 2002): pp. 75-104.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}